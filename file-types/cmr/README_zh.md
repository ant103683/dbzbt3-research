# com_param.cmr (COM 变身识别)

## 介绍
最初由我和 [malachi](https://github.com/malachi1990) 在 2022 年 1 月研究，并在 2023 年 10 月重新审视。

当从 ``common_param.dat`` 文件**编辑变身**时，AI **实际上并不知道所做的更改**。

许多人会认为这种变身识别是*硬编码*的，但幸运的是，**它不是**。

如果您对**批量编辑 COM 参数**（不涉及十六进制）感兴趣，[请点击这里](https://github.com/ViveTheModder/bt3-com-param-editor)。

## 详细分析
![speak-1](https://github.com/ViveTheModder/dbzbt3-research/blob/main/file-types/cmr/img/com-1.png)

诚然，我们并不确切知道所有内容，但要点如下：
* **红色**字节根据其要求和奖励作为某些变身类别的标识符/描述符；
* **青色**字节不那么具有指示性，但它们仍然值得进一步研究；
* **绿色**字节，如果设置为 0x0A，将使 AI 识别多个变身（如果有的话）；
* **紫色**字节是 COM 变身所需的最大生命值百分比。

以下是位于第 15 字节的短整型可以采用的十六进制值列表：

```
[字节 15-16]   [最大 HP %]   [字节 264]  [变身类别/候选者]
00 00           00           00          默认值（无变身）
14 14           1E (30%)     1E          大猿猴、邪恶神龙、萨博、比迪丽
1E 32           28 (40%)     3C          具有生命值奖励的变身
14 28           1E (30%)     32          具有气奖励的变身
28 0A           28 (40%)     0F          无奖励的变身（例如超级赛亚人）
28 03           3C (60%)     03          仅解除变身
```

## 有趣的统计
1. 对于融合，最大生命值百分比设置为 60%，至少对于悟天和小特兰克斯是这样。否则，应该是 40%。
2. 如果满足以下条件，COM 变身的可能性会增加 14%：
* 这是弗利萨类型的变身（1 库存，5k HP 奖励）；
* 它面对的是真正的玩家（使 COM 对 COM 战斗的可能性降低 14%）。